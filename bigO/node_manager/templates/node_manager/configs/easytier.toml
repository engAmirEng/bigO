instance_name = "{{ easytier_node_obj }}"

{% if ipv4 %}
ipv4 = "{{ ipv4 }}"
{% endif %}

listeners = [
{% for i in easytier_node_obj.node_nodelisteners.all %}
    "{{ i.protocol }}://0.0.0.0:{{ i.port }}",
{% endfor %}
]

{% if external_node %}
external_node = "{{ external_node }}"
{% endif %}

{% for i in peers %}
[[peer]]
uri = "{{ i }}"
{% endfor %}

{% for i in proxy_networks %}
[[proxy_network]]
cidr = "{{ i }}"
allow = ["tcp", "udp", "icmp"]
{% endfor %}

{% if mtu %}
mtu = {{ mtu }}
{% endif %}

[network_identity]
network_name = "{{ easytier_node_obj.network.network_name }}"
network_secret = "{{ easytier_node_obj.network.network_secret }}"
